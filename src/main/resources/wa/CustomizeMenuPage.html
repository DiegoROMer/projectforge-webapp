<html lang="en" xmlns:wicket="http://wicket.apache.org/dtds.data/wicket-xhtml1.4-strict.dtd">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>

<body>
  <wicket:extend>
    <wicket:fragment wicket:id="custMenuEntryFragment">
      <li wicket:id="li"><a href="#" wicket:id="label">[menu label]</a> <span wicket:id="renameMenuEntryLink">&nbsp;<img
          wicket:id="renameEntryIcon" />&nbsp;
      </span> <span wicket:id="deleteMenuEntryLink"><img wicket:id="deleteEntryIcon" /></span>
        <ul wicket:id="subMenu">
          <wicket:container wicket:id="subMenuEntry" />
        </ul></li>
    </wicket:fragment>
    <wicket:fragment wicket:id="completeMenuEntryFragment">
      <li wicket:id="li"><a href="#"><span wicket:id="label">[menu label]</span></a>
        <ul wicket:id="subMenu">
          <wicket:container wicket:id="subMenuEntry" />
        </ul></li>
    </wicket:fragment>
    <div class="box grid_16 round_all">
      <div class="block">
        <div class="columns clearfix">
          <div class="col_50">
            <h2>
              <wicket:message key="menu.customize.title" />
            </h2>
            <div id="cust-menu">
              <ul>
                <wicket:container wicket:id="custMenuEntry" />
              </ul>
            </div>
            <input type="button" onclick="javascript:createCustomMenuEntry();" value="create" /> <input type="button"
              onclick="javascript:saveCustomMenuEntry();" value="save" />
          </div>
          <div class="col_50">
            <h2>
              <wicket:message key="menu.customize.completeMenu" />
            </h2>
            <div id="compl-menu">
              <ul>
                <wicket:container wicket:id="completeMenuEntry" />
              </ul>
            </div>
          </div>
        </div>
      </div>
      <div class="block">
        <h1>ToDo: speichern, neue Gruppe, Namen Ã¤ndern.</h1>
        <wicket:message key="menu.customize.help" />
      </div>
    </div>
    <script type="text/javascript" wicket:id="i18nVars">
					var enterNewName = "Enter a new name";
				</script>
    <script type="text/javascript">
					$(function() {
						$("#cust-menu")
								.jstree(
										{
											"dnd" : {
												"drag_check" : function(data) {
													var id = $(data.r).attr(
															"id");
													if (id && id.match(/^c/)) {
														// Target is menu entry with link.
														return false;
													}
													return {
														after : false,
														before : false,
														inside : true
													};
												},
												"drag_finish" : function(data) {
													alert("DRAG OK, obj="
															+ data.o.id
															+ ", target="
															+ $(data.r).attr(
																	"id"));
												}
											},
											"themes" : {
												"theme" : "apple",
												"dots" : false,
												"icons" : true
											},
											"types" : {
												"types" : {
													"leaf" : {
														"valid_children" : "none",
														"icon" : {
															"image" : "../images/jstree-star.png"
														}
													},
													"default" : {
														"max_children" : -1,
														"max_depth" : 3,
														"valid_children" : "all"
													}
												}
											},
											"contextmenu" : {
												"items" : {
													"create" : {
														"label" : "Anlegen",
														"separator_before" : false,
														"separator_after" : true,
														"action" : function(obj) {
															this.create(obj);
														}
													},
													"rename" : {
														"separator_before" : false,
														"separator_after" : false,
														"label" : "Rename",
														"icon" : "../images/jstree-edit.png",
														"action" : function(obj) {
															this.rename(obj);
														}
													},
													"remove" : {
														"separator_before" : false,
														"icon" : "../images/jstree-remove.png",
														"separator_after" : false,
														"label" : "Delete",
														"action" : function(obj) {
															if (this
																	.is_selected(obj)) {
																this.remove();
															} else {
																this
																		.remove(obj);
															}
														}
													}
												}
											},
											"plugins" : [ "themes",
													"html_data", "ui", "dnd",
													"crrm", "types", "hotkeys",
													"xml_data", "contextmenu" ]
										});
					});
					$(function() {
						$("#compl-menu")
								.jstree(
										{
											"themes" : {
												"theme" : "apple",
												"dots" : false,
												"icons" : true
											},
											"types" : {
												"types" : {
													"leaf" : {
														"icon" : {
															"image" : "../images/jstree-star.png"
														}
													}
												}
											},
											"plugins" : [ "themes",
													"html_data", "ui", "types",
													"hotkeys" ]
										});
					});
					function createCustomMenuEntry() {
						$("#cust-menu").jstree("create", "#new", "last",
								enterNewName);
					}
					function removeCustomMenuEntry(id) {
						$("#cust-menu").jstree("remove", id);
					}
					function renameCustomMenuEntry(id) {
						$("#cust-menu").jstree("rename", id);
					}
					function saveCustomMenuEntry() {
						alert($("#cust-menu").jstree("get_xml", "nest", "-1",
								[ "id" ]));
					}
				</script>
  </wicket:extend>
</body>
</html>